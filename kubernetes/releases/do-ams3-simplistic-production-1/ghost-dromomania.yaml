---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: ghost-dromomania
  namespace: default
spec:
  chart:
    repository: https://charts.bitnami.com
    name: ghost
    version: 6.7.19
    releaseName: ghost-dromomania
  values:
    ghostHost: dromomania.be
    ghostUsername: dromomania
    ghostEmail: dromomania@simplistic.be
    ghostBlogTitle: Dromomania
    persistence:
      storageClass: do-block-storage
    mariadb:
      enabled: true
      persistence:
        storageClass: do-block-storage
    ingress:
      enabled: true
      annotations:
        - kubernetes.io/ingress.class: nginx
        - certmanager.k8s.io/cluster-issuer: letsencrypt-prod
      hosts:
        - host: dromomania.be
          paths: ["/"]
      tls:
        - secretName: letsencrypt-prod
          hosts:
            - dromomania.be
